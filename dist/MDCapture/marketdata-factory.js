"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const repo_1=require("jspurefix/dist/types/FIX4.4/repo"),jspurefix_1=require("jspurefix");class MarketDataFactory{static createMarketDataRequest(e,t=repo_1.SubscriptionRequestType.SnapshotAndUpdates,r,n=null){return{SubscriptionRequestType:t,MDReqID:e,MarketDepth:0,InstrmtMDReqGrp:[{Instrument:{Symbol:r}}]}}static createSecurityListRequest(e,t=repo_1.SecurityListRequestType.Symbol){return{SecurityReqID:e,SecurityListRequestType:t}}static createTestRequest(e){return{TestReqID:e}}static createMassQuoteAcknowledgement(e){return{QuoteID:e}}static parseLiveQuotes(e,t){try{switch(e){case jspurefix_1.MsgType.MarketDataSnapshotFullRefresh:{const e=t.toObject(),r=e.MDFullGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Bid)?e.MDFullGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Bid).MDEntryPx:0,n=e.MDFullGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Offer)?e.MDFullGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Offer).MDEntryPx:0;return[{timeStamp:e.StandardHeader.SendingTime,symbol:e.Instrument.Symbol,bid:r,ask:n}]}case jspurefix_1.MsgType.MarketDataIncrementalRefresh:{const e=t.toObject(),r=e.MDIncGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Bid)?e.MDIncGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Bid).MDEntryPx:0,n=e.MDIncGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Offer)?e.MDIncGrp.find(e=>e.MDEntryType===repo_1.MDEntryType.Offer).MDEntryPx:0;return[{timeStamp:e.StandardHeader.SendingTime,symbol:e.MDIncGrp[0].Instrument.Symbol,bid:r,ask:n}]}case jspurefix_1.MsgType.MassQuote:{const e=t.toObject();return e.QuotSetGrp.map(t=>{return{timeStamp:e.StandardHeader.SendingTime,reqID:t.QuoteSetID,bid:t.QuotEntryGrp.find(e=>"0"==e.QuoteEntryID).BidSpotRate?t.QuotEntryGrp.find(e=>"0"==e.QuoteEntryID).BidSpotRate:-1,ask:t.QuotEntryGrp.find(e=>"0"==e.QuoteEntryID).OfferSpotRate?t.QuotEntryGrp.find(e=>"0"==e.QuoteEntryID).OfferSpotRate:-1}})}default:return}}catch(e){throw new Error("Error parsing LiveQuote - "+e)}}}exports.MarketDataFactory=MarketDataFactory;