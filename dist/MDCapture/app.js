"use strict";var __awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,c)}u((r=r.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const marketdata_client_1=require("./marketdata-client"),jspurefix_1=require("jspurefix"),launcher_1=require("../launcher"),common_1=require("./common"),path=require("path");class AppNfixLauncher extends launcher_1.Launcher{constructor(){super("./config.json")}getInitiator(e){return jspurefix_1.initiator(e,e=>new marketdata_client_1.MarketDataClient(e,this.appConfig),5e3)}}(()=>__awaiter(this,void 0,void 0,function*(){var e=__dirname;const n=path.join(e,"./../config.json"),t=common_1.Common.loadAppConfig(n);for(var r=0;r<t.MaxAttempts;)try{var o=new AppNfixLauncher;yield o.run(),r=0,o=null,console.log("done")}catch(e){console.log(e.message),r++}finally{yield common_1.Common.delay(6e4)}}))();